<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>3D藍色流水效果</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        canvas { display: block; }
        .ui-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; color: white; text-align: center; }
        .status { font-size: 24px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="ui-overlay">
        <div class="status">觸控開始藍色流水效果</div>
        <div class="status">準備就緒</div>
        <!-- 可以保留或修改其他UI元素，但為了簡化，我先移除不必要的圖像和按鈕 -->
    </div>

    <script>
        let angle = 0;
        let waveHeight = 50;
        let gridSize = 20;
        let cols, rows;

        function setup() {
            createCanvas(windowWidth, windowHeight, WEBGL);
            cols = floor(width / gridSize);
            rows = floor(height / gridSize);
            noStroke();
        }

        function draw() {
            background(0, 20, 50); // 深藍色背景，模擬水下環境
            rotateX(PI / 3); // 傾斜視角以顯示3D效果
            translate(-width / 2, -height / 2, -100); // 調整位置

            // 燈光設定，增加水面反射感
            ambientLight(50);
            directionalLight(200, 200, 255, 0, 0, -1); // 藍白光從上方照射

            for (let y = 0; y < rows; y++) {
                beginShape(TRIANGLE_STRIP);
                for (let x = 0; x < cols; x++) {
                    let xPos = x * gridSize;
                    let yPos = y * gridSize;
                    let z1 = map(noise(x * 0.1, y * 0.1, frameCount * 0.01), 0, 1, -waveHeight, waveHeight);
                    let blueShade1 = map(z1, -waveHeight, waveHeight, 100, 255); // 根據高度調整藍色深度

                    fill(0, 100, blueShade1, 200); // 半透明藍色，模擬水流
                    vertex(xPos, yPos, z1);

                    let z2 = map(noise(x * 0.1, (y + 1) * 0.1, frameCount * 0.01), 0, 1, -waveHeight, waveHeight);
                    let blueShade2 = map(z2, -waveHeight, waveHeight, 100, 255);

                    fill(0, 100, blueShade2, 200);
                    vertex(xPos, yPos + gridSize, z2);
                }
                endShape();
            }

            // 增加流動感：緩慢旋轉或移動
            angle += 0.005;
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            cols = floor(width / gridSize);
            rows = floor(height / gridSize);
        }

        function touchStarted() {
            // 可以添加觸控互動，例如改變波浪高度
            waveHeight = 100;
            return false;
        }
    </script>
</body>
</html>
